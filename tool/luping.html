<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿å±å¹•å½•åˆ¶å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .guide-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 4px solid #FFEB3B;
        }
        
        .guide-card h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .guide-card ul {
            padding-left: 20px;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .format-select {
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            color: #2E7D32;
            font-weight: 500;
            cursor: pointer;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .format-select:hover {
            background: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        button {
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-start {
            background: #2196F3;
            color: white;
        }
        
        .btn-start:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.3);
        }
        
        .btn-stop {
            background: #F44336;
            color: white;
        }
        
        .btn-stop:hover {
            background: #D32F2F;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(244, 67, 54, 0.3);
        }
        
        .btn-download {
            background: #FF9800;
            color: white;
            display: none;
        }
        
        .btn-download:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.3);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .status {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            min-height: 24px;
        }
        
        .timer {
            font-weight: bold;
            color: #FFEB3B;
        }
        
        .preview-container {
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            overflow: hidden;
            display: none;
        }
        
        #preview {
            width: 100%;
            display: block;
        }
        
        .error-message {
            color: #FFCDD2;
            background: rgba(244, 67, 54, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        .success-message {
            color: #C8E6C9;
            background: rgba(76, 175, 80, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        .permission-check {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 0.95rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 25px 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            .format-select {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¥ åœ¨çº¿å±å¹•å½•åˆ¶å·¥å…·</h1>
        
        <!-- æ“ä½œæŒ‡å¼•å¡ç‰‡ -->
        <div class="guide-card">
            <h3>ğŸ“‹ å½•åˆ¶æ“ä½œæŒ‡å¼•</h3>
            <ul>
                <li>1. ç‚¹å‡»ã€Œå¼€å§‹å½•åˆ¶ã€åï¼Œä¼šå¼¹å‡ºå±å¹•é€‰æ‹©çª—å£</li>
                <li>2. åœ¨å¼¹çª—ä¸­é€‰æ‹©è¦å½•åˆ¶çš„å±å¹•/çª—å£/æ ‡ç­¾é¡µ</li>
                <li>3. ç¡®è®¤é€‰æ‹©åå¼€å§‹å½•åˆ¶ï¼Œç‚¹å‡»ã€Œåœæ­¢å½•åˆ¶ã€ç»“æŸ</li>
                <li>4. å½•åˆ¶å®Œæˆåå¯é¢„è§ˆå¹¶ä¸‹è½½è§†é¢‘æ–‡ä»¶</li>
            </ul>
        </div>
        
        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>
        
        <div class="permission-check" id="permissionCheck">
            ğŸ“Œ å‡†å¤‡å°±ç»ªï¼Œè¯·ç‚¹å‡»ã€Œå¼€å§‹å½•åˆ¶ã€å¹¶åœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©è¦å½•åˆ¶çš„å†…å®¹
        </div>
        
        <div class="controls">
            <label for="format" class="sr-only">é€‰æ‹©å½•åˆ¶æ ¼å¼ï¼š</label>
            <select id="format" class="format-select">
                <option value="auto">è‡ªåŠ¨é€‰æ‹© (æ¨è)</option>
                <option value="video/webm">WebM</option>
                <option value="video/mp4">MP4</option>
            </select>
            
            <button id="startBtn" class="btn-start">
                ğŸ¬ å¼€å§‹å½•åˆ¶
            </button>
            
            <button id="stopBtn" class="btn-stop" disabled>
                â¹ï¸ åœæ­¢å½•åˆ¶
            </button>
            
            <button id="downloadBtn" class="btn-download">
                ğŸ“¥ ä¸‹è½½è§†é¢‘
            </button>
        </div>
        
        <div class="status">
            çŠ¶æ€ï¼š<span id="recordingStatus">æœªå¼€å§‹</span>
            <span id="timer" class="timer" style="display: none;"> | å½•åˆ¶æ—¶é•¿ï¼š00:00:00</span>
        </div>
        
        <div class="preview-container" id="previewContainer">
            <video id="preview" controls></video>
        </div>
    </div>

    <script>
        let mediaRecorder;
        let recordedChunks = [];
        let stream;
        let timerInterval;
        let startTime;
        let videoBlob;
        let isRecording = false;
        let selectionTimeout;

        // DOM å…ƒç´ 
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const preview = document.getElementById('preview');
        const previewContainer = document.getElementById('previewContainer');
        const recordingStatus = document.getElementById('recordingStatus');
        const timer = document.getElementById('timer');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const permissionCheck = document.getElementById('permissionCheck');
        const formatSelect = document.getElementById('format');

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(element, message, duration = 5000) {
            element.textContent = message;
            element.style.display = 'block';
            if (duration > 0) {
                setTimeout(() => {
                    element.style.display = 'none';
                }, duration);
            }
        }

        // æ˜¾ç¤ºé”™è¯¯
        function showError(message) {
            showMessage(errorMessage, `âŒ ${message}`);
        }

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        function showSuccess(message) {
            showMessage(successMessage, `âœ… ${message}`);
        }

        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600).toString().padStart(2, '0');
            const minutes = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
            const secs = Math.floor(seconds % 60).toString().padStart(2, '0');
            return `${hours}:${minutes}:${secs}`;
        }

        // æ›´æ–°å½•åˆ¶æ—¶é•¿
        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            timer.textContent = ` | å½•åˆ¶æ—¶é•¿ï¼š${formatTime(elapsed)}`;
        }

        // åœæ­¢æ‰€æœ‰è½¨é“
        function stopAllTracks() {
            if (stream) {
                stream.getTracks().forEach(track => {
                    try {
                        track.stop();
                    } catch (e) {
                        console.warn('åœæ­¢è½¨é“æ—¶å‡ºé”™:', e);
                    }
                });
                stream = null;
            }
        }

        // æ¸…ç†å½•åˆ¶å™¨
        function cleanupRecorder() {
            isRecording = false;
            clearTimeout(selectionTimeout);
            
            if (mediaRecorder) {
                try {
                    if (mediaRecorder.state !== 'inactive') {
                        mediaRecorder.stop();
                    }
                } catch (e) {
                    console.warn('åœæ­¢å½•åˆ¶å™¨æ—¶å‡ºé”™:', e);
                }
                mediaRecorder = null;
            }
            
            clearInterval(timerInterval);
            timer.style.display = 'none';
            
            // é‡ç½®UIçŠ¶æ€
            startBtn.disabled = false;
            stopBtn.disabled = true;
            recordingStatus.textContent = 'æœªå¼€å§‹';
            permissionCheck.textContent = 'ğŸ“Œ å‡†å¤‡å°±ç»ªï¼Œè¯·ç‚¹å‡»ã€Œå¼€å§‹å½•åˆ¶ã€å¹¶åœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©è¦å½•åˆ¶çš„å†…å®¹';
        }

        // è·å–æ”¯æŒçš„MIMEç±»å‹
        function getSupportedMimeType() {
            if (formatSelect.value !== 'auto') {
                return MediaRecorder.isTypeSupported(formatSelect.value) 
                    ? formatSelect.value 
                    : 'video/webm';
            }
            
            if (MediaRecorder.isTypeSupported('video/webm;codecs=vp9,opus')) {
                return 'video/webm;codecs=vp9,opus';
            } else if (MediaRecorder.isTypeSupported('video/webm')) {
                return 'video/webm';
            }
            return 'video/webm';
        }

        // æ ¸å¿ƒå½•åˆ¶é€»è¾‘
        startBtn.addEventListener('click', function() {
            // é˜²æ­¢é‡å¤ç‚¹å‡»
            if (isRecording || startBtn.disabled) return;

            // é‡ç½®çŠ¶æ€
            recordedChunks = [];
            videoBlob = null;
            errorMessage.style.display = 'none';
            successMessage.style.display = 'none';
            previewContainer.style.display = 'none';
            downloadBtn.style.display = 'none';

            // æ ‡è®°ä¸ºå½•åˆ¶ä¸­
            isRecording = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            recordingStatus.textContent = 'æ­£åœ¨è¯·æ±‚å½•åˆ¶æƒé™...';
            permissionCheck.textContent = 'ğŸ” å±å¹•é€‰æ‹©çª—å£åº”è¯¥å·²å¼¹å‡ºï¼Œè¯·é€‰æ‹©è¦å½•åˆ¶çš„å±å¹•/çª—å£/æ ‡ç­¾é¡µ';

            // è®¾ç½®é€‰æ‹©è¶…æ—¶æ£€æµ‹
            selectionTimeout = setTimeout(() => {
                if (isRecording && !stream) {
                    showError('å±å¹•é€‰æ‹©è¶…æ—¶ï¼è¯·ç¡®ä¿é€‰æ‹©çª—å£å¼¹å‡ºååŠæ—¶é€‰æ‹©å½•åˆ¶å†…å®¹ï¼Œä¸è¦å…³é—­/å–æ¶ˆ');
                    cleanupRecorder();
                }
            }, 15000); // 15ç§’è¶…æ—¶

            // è·å–MIMEç±»å‹
            const mimeType = getSupportedMimeType();

            // å…³é”®ï¼šç›´æ¥è°ƒç”¨getDisplayMediaï¼Œæ— å¼‚æ­¥åµŒå¥—
            navigator.mediaDevices.getDisplayMedia({
                video: {
                    cursor: 'always',
                    displaySurface: 'monitor', // ä¼˜å…ˆé€‰æ‹©æ•´ä¸ªå±å¹•
                    logicalSurface: true
                },
                audio: {
                    echoCancellation: true,
                    noiseSuppression: true
                }
            }).then(function(mediaStream) {
                // æ¸…é™¤è¶…æ—¶æ£€æµ‹
                clearTimeout(selectionTimeout);
                
                // ä¿å­˜æµå¼•ç”¨
                stream = mediaStream;
                showSuccess('âœ… å·²æˆåŠŸè·å–å±å¹•å½•åˆ¶æƒé™ï¼Œå¼€å§‹å½•åˆ¶...');
                permissionCheck.textContent = 'ğŸ™ï¸ æ­£åœ¨å½•åˆ¶ä¸­ï¼Œè¯·ç‚¹å‡»ã€Œåœæ­¢å½•åˆ¶ã€ç»“æŸ';

                // ç›‘å¬æµæ–­å¼€
                stream.addEventListener('inactive', function() {
                    if (isRecording) {
                        showError('å½•åˆ¶æµå·²ä¸­æ–­ï¼å¯èƒ½æ˜¯æ‚¨å…³é—­äº†å½•åˆ¶çš„çª—å£æˆ–å±å¹•');
                        cleanupRecorder();
                    }
                });

                // æ£€æŸ¥è½¨é“æ˜¯å¦æœ‰æ•ˆ
                const videoTracks = stream.getVideoTracks();
                if (videoTracks.length === 0) {
                    throw new Error('æœªè·å–åˆ°è§†é¢‘è½¨é“ï¼Œè¯·é‡æ–°é€‰æ‹©å½•åˆ¶å†…å®¹');
                }

                // åˆ›å»ºå½•åˆ¶å™¨
                mediaRecorder = new MediaRecorder(stream, { 
                    mimeType: mimeType,
                    videoBitsPerSecond: 2500000 // è®¾ç½®è§†é¢‘æ¯”ç‰¹ç‡ï¼Œæå‡ç”»è´¨
                });

                // æ•°æ®æ”¶é›†
                mediaRecorder.ondataavailable = function(e) {
                    if (e.data && e.data.size > 0) {
                        recordedChunks.push(e.data);
                    }
                };

                // å½•åˆ¶åœæ­¢å¤„ç†
                mediaRecorder.onstop = function() {
                    stopAllTracks();
                    isRecording = false;

                    if (recordedChunks.length > 0) {
                        // åˆ›å»ºè§†é¢‘Blob
                        videoBlob = new Blob(recordedChunks, { type: mimeType });
                        preview.src = URL.createObjectURL(videoBlob);
                        previewContainer.style.display = 'block';
                        downloadBtn.style.display = 'block';
                        recordingStatus.textContent = 'å½•åˆ¶å®Œæˆ';
                        permissionCheck.textContent = 'ğŸ“½ï¸ å½•åˆ¶å®Œæˆï¼Œå¯é¢„è§ˆå¹¶ä¸‹è½½è§†é¢‘';
                        showSuccess('å½•åˆ¶å·²å®Œæˆï¼æ‚¨å¯ä»¥é¢„è§ˆå¹¶ä¸‹è½½è§†é¢‘');
                    } else {
                        recordingStatus.textContent = 'å½•åˆ¶å¤±è´¥';
                        permissionCheck.textContent = 'ğŸ“Œ å‡†å¤‡å°±ç»ªï¼Œè¯·ç‚¹å‡»ã€Œå¼€å§‹å½•åˆ¶ã€å¹¶åœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©è¦å½•åˆ¶çš„å†…å®¹';
                        showError('æœªå½•åˆ¶åˆ°ä»»ä½•è§†é¢‘æ•°æ®ï¼Œè¯·ç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„å½•åˆ¶å†…å®¹å¹¶å½•åˆ¶è¶³å¤Ÿé•¿çš„æ—¶é—´');
                    }

                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                    clearInterval(timerInterval);
                    timer.style.display = 'none';
                };

                // å½•åˆ¶é”™è¯¯
                mediaRecorder.onerror = function(e) {
                    showError(`å½•åˆ¶å™¨é”™è¯¯: ${e.error.message || 'æœªçŸ¥é”™è¯¯'}`);
                    cleanupRecorder();
                };

                // å¼€å§‹å½•åˆ¶
                mediaRecorder.start(1000); // 1ç§’ä¸€ä¸ªåˆ†ç‰‡
                startTime = Date.now();
                recordingStatus.textContent = 'æ­£åœ¨å½•åˆ¶';
                timer.style.display = 'inline';
                timerInterval = setInterval(updateTimer, 1000);

            }).catch(function(err) {
                // æ•è·æ‰€æœ‰é”™è¯¯
                clearTimeout(selectionTimeout);
                cleanupRecorder();

                // è¯¦ç»†çš„é”™è¯¯åˆ†ç±»å¤„ç†
                let errorText = '';
                if (err.name === 'NotAllowedError' || err.message.includes('Permission denied')) {
                    errorText = 'æ‚¨æ‹’ç»äº†å±å¹•å½•åˆ¶æƒé™ï¼\n1. è¯·ç¡®ä¿ç‚¹å‡»ã€Œå…è®¸ã€æˆäºˆæƒé™\n2. æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ï¼šè®¾ç½® > ç½‘ç«™è®¾ç½® > æƒé™ > å±å¹•å½•åˆ¶ > å…è®¸æ­¤ç½‘ç«™';
                } else if (err.name === 'NotFoundError' || err.message.includes('can not be found')) {
                    errorText = 'æœªæ‰¾åˆ°å¯å½•åˆ¶çš„å±å¹•å†…å®¹ï¼\n1. é€‰æ‹©çª—å£å¼¹å‡ºåï¼Œè¯·é€‰æ‹©ä¸€ä¸ªå±å¹•/çª—å£/æ ‡ç­¾é¡µ\n2. ä¸è¦ç›´æ¥å…³é—­/å–æ¶ˆé€‰æ‹©çª—å£\n3. ç¡®ä¿ç³»ç»Ÿå…è®¸æµè§ˆå™¨è®¿é—®å±å¹•å†…å®¹';
                } else if (err.message.includes('transient activation')) {
                    errorText = 'æ“ä½œè¶…æ—¶ï¼è¯·ç›´æ¥ç‚¹å‡»ã€Œå¼€å§‹å½•åˆ¶ã€æŒ‰é’®ï¼Œä¸è¦é‡å¤ç‚¹å‡»æˆ–ç­‰å¾…';
                } else if (err.name === 'AbortError') {
                    errorText = 'æ‚¨å–æ¶ˆäº†å±å¹•é€‰æ‹©ï¼è¯·åœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©è¦å½•åˆ¶çš„å†…å®¹ï¼Œä¸è¦ç‚¹å‡»å–æ¶ˆ/å…³é—­';
                } else {
                    errorText = `å½•åˆ¶å¤±è´¥: ${err.message || err.name}\nè¯·å°è¯•ä½¿ç”¨Chrome/Edgeæµè§ˆå™¨ï¼Œæˆ–åˆ·æ–°é¡µé¢é‡è¯•`;
                }

                // åˆ†è¡Œæ˜¾ç¤ºè¯¦ç»†é”™è¯¯
                errorText = errorText.replace(/\n/g, '<br>');
                errorMessage.innerHTML = `âŒ ${errorText}`;
                errorMessage.style.display = 'block';
                
                recordingStatus.textContent = 'å½•åˆ¶å¤±è´¥';
                console.error('å½•åˆ¶é”™è¯¯è¯¦æƒ…:', err);
            });
        });

        // åœæ­¢å½•åˆ¶
        stopBtn.addEventListener('click', function() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                showSuccess('æ­£åœ¨åœæ­¢å½•åˆ¶å¹¶å¤„ç†è§†é¢‘...');
            }
            cleanupRecorder();
        });

        // ä¸‹è½½è§†é¢‘
        downloadBtn.addEventListener('click', function() {
            if (!videoBlob) {
                showError('æ²¡æœ‰å¯ä¸‹è½½çš„è§†é¢‘æ•°æ®');
                return;
            }

            try {
                // ç”Ÿæˆæ–‡ä»¶å
                const now = new Date();
                const timestamp = `${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2, '0')}${now.getDate().toString().padStart(2, '0')}_${now.getHours().toString().padStart(2, '0')}${now.getMinutes().toString().padStart(2, '0')}`;
                let extension = 'webm';
                const mimeType = getSupportedMimeType();
                if (mimeType.includes('mp4')) extension = 'mp4';

                const fileName = `å±å¹•å½•åˆ¶_${timestamp}.${extension}`;

                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const a = document.createElement('a');
                a.href = URL.createObjectURL(videoBlob);
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);

                // é‡Šæ”¾URL
                setTimeout(() => URL.revokeObjectURL(a.href), 1000);
                showSuccess(`è§†é¢‘å·²å¼€å§‹ä¸‹è½½: ${fileName}`);
            } catch (e) {
                showError(`ä¸‹è½½å¤±è´¥: ${e.message}`);
            }
        });

        // é¡µé¢å¸è½½æ¸…ç†
        window.addEventListener('beforeunload', function() {
            cleanupRecorder();
            stopAllTracks();
        });

        // åˆå§‹åŒ–æ£€æŸ¥
        window.addEventListener('load', function() {
            // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
            if (!window.MediaRecorder) {
                showError('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒMediaRecorder APIï¼è¯·ä½¿ç”¨Chrome/Edge/Firefoxæœ€æ–°ç‰ˆ');
                startBtn.disabled = true;
                permissionCheck.textContent = 'âŒ æµè§ˆå™¨ä¸æ”¯æŒæ­¤åŠŸèƒ½ï¼Œè¯·å‡çº§æˆ–æ›´æ¢æµè§ˆå™¨';
            } else if (!navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia) {
                showError('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒå±å¹•å½•åˆ¶ï¼è¯·ä½¿ç”¨Chrome/Edgeæµè§ˆå™¨');
                startBtn.disabled = true;
                permissionCheck.textContent = 'âŒ æµè§ˆå™¨ä¸æ”¯æŒå±å¹•å½•åˆ¶åŠŸèƒ½';
            } else {
                // æ£€æŸ¥æ˜¯å¦ä¸ºHTTPSï¼ˆlocalhosté™¤å¤–ï¼‰
                if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {
                    showMessage(permissionCheck, 'âš ï¸ å»ºè®®ä½¿ç”¨HTTPSåè®®ä»¥è·å¾—æœ€ä½³å…¼å®¹æ€§', 0);
                }
            }
        });
    </script>
</body>
</html>
